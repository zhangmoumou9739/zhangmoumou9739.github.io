<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/recommend.css">
    <link rel="stylesheet" href="./font_3773143_mlwbitziz5e/iconfont.css">
</head>
<body>
    <script src="./js/rem.js"></script>
    <header>
        <img src="./images/nav/logo_main.png" alt="">
        <a href="./index.html">返回</a>
    </header>
    <div id="tab">
        <div class="tc show"> 
            <video controls>  
                <source  class="tc show" src="./images/recommend/recommend1_1.mp4" alt="">
            </video>
        </div>          
            
        <div class = "counterpart">
            <a>CCTV-17《中华风物》</a>
            <button id = "toggle">画中画</button>  
            <!-- <img src="./images/recommend/iconUnfold.png" 
            alt="" id="btn1" onclick="exchange()"> -->
            <!-- <div >
                <p class="unfold">起于春秋荣于唐宋，千里舳舻千载运河。CCTV-17《中华风物》运河美食篇，
                    邀您品味每一寸风物背后的人文之美、乡土之美。芡实隐于莲叶，八鲜聚于
                    鸭腹，莼鲈芳鲜，藕香蟹肥，与体验者一同探访运河边的地道风物！</p>
            </div> -->
        </div>

    <ul id="collect">
        <li>       
            <a class="iconfont icon-dianzan"></a>
            <a>点赞</a>
        </li>
        <li>
            <a class="iconfont icon-shoucang"></a>
            <a>收藏</a>
        </li>
        <li>
            <a class="iconfont icon-pinglun"></a>
            <a>评论</a>
        </li>
    </ul>
    <div id="review-release">

            <textarea  id="tx" placeholder="发布一条友善的评论" maxlength="200"></textarea>
            <button class="btnReview">发布</button>
        <div class="list">
            <div class="item">
                <div class="info">
                    <p class="text"></p>       
                </div>
            </div>
        </div>
    </div>    
    <div id="attention">
        <img src="./images/recommend/attention.jpg" alt="">
        <span>新农研究院</span>
        <span>125个视频·5699个点赞</span>
    </div>
    
        <div class="slip">
            <p>选集</p>
            <div class="miniview">
                
                <div class="cur">
                    <img  src="./images/recommend/miniview1.jpg"  alt="">
                    <p>《中华风物》第1集：芡实遍芳塘</p>
                </div>
                <div>
                    <img src="./images/recommend/miniview2.jpg" alt="">
                    <p>《中华风物》第2集：水暖鸭先知</p>
                </div>
                <div>
                    <img src="./images/recommend/miniview3.jpg" alt="">
                    <p>《中华风物》第3集：莼鲈正芳鲜</p>
                </div>
            </div>
        </div>
    </div>
    <section>
        <h4>体育</h4>
        <ul class="teletext">
          <li>
            <img src="./images/recommend/section1.jpg" alt="" />
            <p>味知道·金秋好风味</p>
    
          </li>
          <li>
            <img src="./images/recommend/section2.jpg" alt="" />
            <p>美味里的中国</p>
          </li>
          <li>
            <img src="./images/recommend/section3.jpg" alt="" />
            <p>点赞最美家乡</p>  
          </li>
          <li>
            <img src="./images/recommend/section4.jpg" alt="" />
            <p>味道（4K）</p>
          </li>
          <li>
            <img src="./images/recommend/section5.jpg" alt="" />
            <p>嘿！小面</p>     
          </li>
          <li>
            <img src="./images/recommend/section6.jpg" alt="" />
            <p>听起来很好吃</p>
          </li>     
        </ul>
    
      </section>

      <script>
 
        var btn = document.querySelector('#toggle');
        var video = document.querySelector('video');

        function printPipWindowDimenisons(evt){
            e.preventDefault();
            var pipWindow = evt.target;
        }
        // video.addEventListener('enterpicP', enter);
        // video.addEventListener('leavepicP', leave);

        async function handleToggle(){
            try{
                if(video !== document.pictureInpictureElement){
                    await video.requestPictureInPicture()

                }else{
                    await document.exitPictureInPicture()
                    
                }
                this.disabled = true;
            }catch (error){         

            }finally{
                this.disabled = false;
            }
        }

        btn.addEventListener('click', handleToggle);

        var dataArr = [
            {uname: 'rosie', imgSrc:'./images/recommend/rosie1.jpg'},
            {uname: 'shishi', imgSrc:'./images/recommend/shishi.jpg'},
            {uname: 'lisa', imgSrc:'./images/recommend/lisa.jpg'}
       
        ]
        

        var rewRelease = document.getElementById('review-release');
        var review = document.getElementById('collect').getElementsByTagName('li');
        // console.log(review)
        review[2].onclick = function(){
            rewRelease.style.display = "block";   
        }
        
        const tx = document.querySelector('#tx');
        const total = document.querySelector('.total');
        const btnReview = document.querySelector('.btnReview');
        const item = document.querySelector('.item');
        const user = document.querySelector('.user')
        var time = document.querySelector('.time');
        // var nowtime = new Date();
        
        var showtime = function () {

            var nowdate = new Date();
            var year = nowdate.getFullYear();
            var month = nowdate.getMonth() + 1;
            var date = nowdate.getDate();
            var day = nowdate.getDay();
            var week = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"]
            var h = nowdate.getHours();
            var m = nowdate.getMinutes();
            return nowtime = year + "年" + month + "月" + date + "日" + week[day] + " " + h +":" + m ;
        }
        
        tx.addEventListener('input' , () =>{
            //trim()去除整段字符串首尾两侧的空白字符
            total.children[0].innerHTML = tx.value.trim().length;
        })

        btnReview.addEventListener('click' , () =>{
            if(!(tx.value.trim())){
                return alert('请输入内容');
            }
            var num =  Math.floor(Math.random()*dataArr.length);

            item.querySelector('.text').innerHTML += `
            <img class="userpic" src=${dataArr[num].imgSrc}>
            <p class = "user">${dataArr[num].uname}</p>
            <p class="time">${showtime()}</p>
            <p class = "message">${tx.value.trim()}</p>
            
            `;
            tx.value = '';
        })

        tx.addEventListener('keydown' , e =>{
            if(e.key === 'Enter'){
                e.preventDefault();
                btn.click();
            }
        })
      </script>
</body>
</html>