<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./font_3773143_mlwbitziz5e/iconfont.css" />
    <link rel="stylesheet" href="./css/live.css" />
    <link rel="stylesheet" href="./css/nav.css">
  </head>
  <body>
    <script src="./js/rem.js"></script>
    <header>
      <img src="./images/nav/logo_main_white.png" alt="">
    </header>

    <section>    
      <div class="member">
        <img src="./images/live/head.png" alt="">
        <!-- <div id="getMember"><img src="./images/shortTV/member3.png" alt=""></div>
        <span id="getMember2">
          <a>立即登录</a>
          <p>开通会员，尊享海量片库</p>
        </span> -->
      </div>
      <div id="slideback">
        <div id="rotation">
          <ul id="imglist">
              <li><a href=""><img src="./images/live/slide1.jpg" alt=""></a></li>
              <li><a href=""><img src="./images/live/slide2.png" alt=""></a></li>
              <li><a href=""><img src="./images/live/slide3.jpg" alt=""></a></li>
              <li><a href=""><img src="./images/live/slide4.png" alt=""></a></li>
              <li><a href=""><img src="./images/live/slide1.png" alt=""></a></li>
          </ul>
          <ul id="icolist">
              <li></li>
              <li></li>
              <li></li>
              <li></li>
          </ul>
          <div class="prev">&lt;</div>
          <div class="next">&gt;</div>
        </div>
        <div id="test"></div>
      </div>
      <div id="midgrid">
          <img src="./images/live/midicon1.png" alt="">
          <img src="./images/live/midicon2.png" alt="">
          <img src="./images/live/midicon3.png" alt="">
          <img src="./images/live/midicon4.png" alt="">
      </div>
      <div class="race">
          <img src="./images/live/sectiontitle2.png" alt="">
          <ul class="booking">
            <div class="bookable">
              <img src="./images/cheer/miniEngland.png" alt=""><a>英国</a><b>vs</b>
              <img src="./images/cheer/miniFrance.png"><a>法国</a>
              <button onclick ="time()" >点击预约</button>
              <div id="once"></div>
              <b id="time">10：20</b>
              <h4>解说员：孙思辰</h4>
              <div class="banclick"></div>
            </div>
       
      <div id="gotop">
          返回顶部 
      </div>      
          </ul>
      </div>
      <div class="itemtitle"><img src="./images/live/sectiontitle1.png" alt=""></div>
      <ul class="item">
        <li>
          <img src="./images/live/play1.jpg" alt="" />
          <p>《你好，世界杯》第1期</p>
        </li>
        <li>
          <img src="./images/live/play2.jpg" alt="" />
          <p>《你好，世界杯》第2期</p>
        </li>
        <li>
          <img src="./images/live/play1.jpg" alt="" />
          <p>《你好，世界杯》第3期</p>
        </li>
        <li>
          <img src="./images/live/play2.jpg" alt="" />
          <p>《你好，世界杯》第4期</p>
        </li>
      </ul>
      <div class="activity">
        <div class="actimg"><img src="./images/live/sectiontitle3.png" alt=""></div>
        <img src="./images/live/act.png" alt="">
        <img src="./images/live/act1.png" alt="">
        <a href="cheer.html"><img src="./images/live/act2.png" alt=""></a>
      </div>
    </section>
    <nav>
      <ul>
        <li>
            <a href="./index.html">
                <span class="iconfont icon-zhuye"></span>
                <p>首页</p>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="iconfont icon-dianshi"></span>
                <p>电视</p>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="iconfont icon-q24gl-stopSquare"></span>
                <p>直播</p>
            </a>
        </li>
        <li>
            <a href="./member.html">
                <span class="iconfont icon-jinrongquan"></span>
                <p>会员</p>
            </a>
        </li>
        <li>
            <a href="./mine.html">
                <span class="iconfont icon-wode"></span>
                <p>我的</p>
            </a>
        </li>
    </ul>
    </nav>
    <script>
    var esico = document.getElementById('icolist').getElementsByTagName('li');
    var eicolist = document.querySelector('#icolist');
    var eimglist = document.querySelector('#imglist');
    var etest = document.querySelector('#test');
    var eprev = document.querySelector('.prev');
    var enext = document.querySelector('.next');
    var left = 0;
    var timer;

    esico[2].style.backgroundColor = 'red';
    run();
    function run(){
      if (left <= -400) {
      left = 0;
      }
      var m = Math.floor(-left/100) ;
      imglist.style.marginLeft = left + '%';
      var n = (left % 100 == 0) ? n = 1200 : n = 6;
      left -= 2;
      icochange(m);
      timer = setTimeout(run,n);
    }

    function icochange(m){
      for (let index = 0; index < esico.length; index++) {
        esico[index].style.backgroundColor = '';
      }
      if (m < esico.length) {
        esico[m].style.backgroundColor = '#fff';
      }

    }

    function imgchange(n){
      let lt = - (n  * 100)
      imglist.style.marginLeft = lt + '%';
      left = lt;
    }
    eprev.onclick = function(){
      let prevgo = Math.floor(-left/100)-1;
      if (prevgo == -1) {
        prevgo =3;
      }
      imgchange(prevgo);
      icochange(prevgo);
    }

    enext.onclick = function(){
      let nextgo = Math.floor(-left/100)+1;
      if (nextgo == 4) {
        nextgo =0;
      }
      imgchange(nextgo);
      icochange(nextgo);
    }

    eicolist.onclick = function(){
      var tg = event.target;
      let ico = tg.innerHTML - 1;
      imgchange(ico);
      icochange(ico);
    }   

    eimglist.onmouseover = function(){
      clearTimeout(timer);
    }

    eimglist.onmouseout = function(){
      run();
    }
  
     var xmlhttp;
		if (window.XMLHttpRequest) {
			//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
			xmlhttp = new XMLHttpRequest();
		} else {
			// IE6, IE5 浏览器执行代码
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
		xmlhttp.onreadystatechange = function () {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				//xmlhttp.responseText;
				//你的ajax代码写在这里，其他位置除了open的前两个参数都不需要也不要改变。
        var ebooking = document.getElementsByClassName("booking")[0];
        function addLi(li){
          var n = ` 
            <div>   
           
            <div class="nation1"> 
            <img src = "${li.img}">
            <a>${li.a}</a>
            </div> 
            <div class="nation2">
            <img src = "${li.img1}">
            <a>${li.a1}</a>
            </div>
            <button >${li.button}</button> 
            </div>  
            <h4>${li.h4}</h4>
          `;
          var nli = document.createElement("li");
          nli.innerHTML = n;
          ebooking.appendChild(nli);
        }
       
        var json = JSON.parse(xmlhttp.responseText);/* 将字符串转换成JSON */
          for(var i=0; i<json.length; i++){
              addLi(json[i]);
          }
			}
		}
		xmlhttp.open("GET", "./json/live.json", true);
		xmlhttp.send();

 

    var gotop = document.querySelector("#gotop");
    var body = document.querySelector("body");
    window.addEventListener("scroll" , function(){
        if(window.pageYOffset >= body.offsetTop+200){
          gotop.style.display = "block";
        }else{
          gotop.style.display = "none";
        }

        gotop.addEventListener("click" , function(){
          window.scroll(0,0);
        })
    })




    var nowD = new Date();
    endD = new Date('2022/12/29 13:40:00'); 
    var timediff = parseInt((endD - nowD)/60000);
    console.log(timediff);
    var btn = document.getElementsByTagName("button");
    console.log(btn);
    
    function time(){
      // contrast_time();
      // function contrast_time(){
    
        if( nowD.getTime() >= endD.getTime()){
          alert('比赛已开始或结束')
        }else{
            var banclick = document.querySelector(".banclick");
            banclick.style.visibility = "visible";
            let minute = document.querySelector("button");
            
            var i = timediff  // 倒计时秒数
            // 定时器 每隔一秒变化一次（1000ms = 1s）
            if(i > 0){
              minute.innerHTML =  "距比赛" + timediff + "分";
              let t = setInterval(countDown, 500);
            }if(i >= 60){
              var hour = parseInt(i/60);
              var minute2 = i - hour*60;
              minute.innerHTML = "距比赛" + hour + "时" + minute2 + "分";
              let t = setInterval(countDownHours, 500);
            }
           
            
            function countDown() {
              console.log(i);
                if(i>=1){
                  i--;
                  minute.innerHTML = "距比赛" + i + "分";    
                }   
                if (i == 0){
                  minute.innerHTML = "时间已到";
                  minute.style.backgroundColor = "#3454bd";
                  minute.style.color = "#fff"
            
                  clearInterval();
                }  
            }
            function countDownHours(){
                if(i>0){
                  minute2--;
                  minute.innerHTML = "距比赛" + hour + "时" + minute2 + "分"; 
                }    
                if(hour != 0 && minute2 == 0){
                  minute2 += 60;
                  hour -= 1;
                }
            }
        }
              
             
      // }
    }

    </script>
  </body>
</html>
